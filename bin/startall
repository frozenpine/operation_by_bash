#!/bin/bash

[[ -L $0 ]] && SCRIPT_FILE=`readlink -fn $0` || SCRIPT_FILE=$0
pushd `dirname "${SCRIPT_FILE}"` >/dev/null
BASE_DIR=`pwd`
popd >/dev/null

source "${BASE_DIR}/module.d/common.sh" || exit 1

CREATE_USER=0

HELP_ARGS["u"]="optional,Wether to create users."

while getopts :uh FLAG; do
    case $FLAG in
        u)
            CREATE_USER=1
        ;;
        h)
            _help >&2
            exit
        ;;
        *)
            error "invalid args: $*"
            _help >&2
            exit 1
        ;;
    esac
done
shift $((OPTIND-1))

${BASE_DIR}/zk start
${BASE_DIR}/zk check

${BASE_DIR}/kfk create
${BASE_DIR}/kfk check

${BASE_DIR}/manage start
${BASE_DIR}/trade start

${BASE_DIR}/manage init

${BASE_DIR}/trade status
${BASE_DIR}/manage status
